<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Nhà trọ Gò Vấp</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="shortcut icon" href="/assets/logo.jpg" type="IMAGE" />
    <link rel="stylesheet" href="/css/admin/dashboard.css" />
  </head>
  <body>
    <!-- header -->
    <header class="header-bg py-3">
      <div
        class="container-fluid d-flex justify-content-center align-items-center"
      >
        <div class="header-logo">
          <img src="/assets/logo_no_text.png" alt="Logo Nhà trọ" />
        </div>

        <h1 class="header-text text-center mb-0">NHÀ TRỌ GÒ VẤP</h1>
      </div>
    </header>

    <!-- menu -->
    <nav
      class="navbar navbar-expand-sm d-flex justify-content-center align-items-center"
    >
      <div class="container-fluid">
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div
          class="collapse navbar-collapse justify-content-center"
          id="navbarNav"
        >
          <ul class="navbar-nav">
            <li
              class="rooms-tab nav-item d-flex justify-content-center align-items-center"
            >
              <img class="nav-img" src="/assets/logo_room.png" alt="" />
              <a class="nav-link" href="#" data-target="rooms-tab-container"
                >Phòng</a
              >
            </li>
            <li
              class="amenities-utilities-tab nav-item d-flex justify-content-center align-items-center"
            >
              <img
                class="nav-img"
                src="/assets/logo_amenity_utility.png"
                alt=""
              />
              <a
                class="nav-link"
                href="#"
                data-target="amenities-utilities-tab-container"
                >Tiện nghi và Tiện ích</a
              >
            </li>
            <li
              class="occupants-tab nav-item d-flex justify-content-center align-items-center"
            >
              <img class="nav-img" src="/assets/logo_occpant.png" alt="" />
              <a class="nav-link" href="#" data-target="occupants-tab-container"
                >Người thuê</a
              >
            </li>
            <li
              class="contracts-tab nav-item d-flex justify-content-center align-items-center"
            >
              <img class="nav-img" src="/assets/logo_contract.png" alt="" />
              <a class="nav-link" href="#" data-target="contracts-tab-container"
                >Hợp đồng</a
              >
            </li>
            <li
              class="invoices-tab nav-item d-flex justify-content-center align-items-center"
            >
              <img class="nav-img" src="/assets/logo_invoice.png" alt="" />
              <a class="nav-link" href="#" data-target="invoices-tab-container"
                >Hóa đơn</a
              >
            </li>
            <li
              class="expenses-tab nav-item d-flex justify-content-center align-items-center"
            >
              <img class="nav-img" src="/assets/logo_expense.png" alt="" />
              <a class="nav-link" href="#" data-target="expenses-tab-container"
                >Chi phí</a
              >
            </li>
            <li
              class="users-tab nav-item d-flex justify-content-center align-items-center"
            >
              <img class="nav-img" src="/assets/logo_user.png" alt="" />
              <a class="nav-link" href="#" data-target="users-tab-container"
                >Người dùng</a
              >
            </li>
            <li
              class="notifications-tab nav-item d-flex justify-content-center align-items-center"
            >
              <img class="nav-img" src="/assets/logo_noti.png" alt="" />
              <a
                class="nav-link"
                href="#"
                data-target="notifications-tab-container"
                >Thông báo</a
              >
            </li>
            <li
              class="settings-tab nav-item d-flex justify-content-center align-items-center"
            >
              <img class="nav-img" src="/assets/logo_setting.png" alt="" />
              <a class="nav-link" href="#" data-target="settings-tab-container"
                >Cài đặt</a
              >
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- content -->
    <div class="content">
      <div class="container mt-4">
        <div id="rooms-tab-container" class="rooms-tab-container">
          <div
            class="rooms-tab-title d-flex justify-content-center align-items-center"
          >
            QUẢN LÝ DANH SÁCH PHÒNG
          </div>
          <div class="row">
            <!-- Left Column: Filters -->
            <div class="col-md-3">
              <div class="filter-container">
                <h5 class="filter-heading">Lọc phòng</h5>

                <!-- Address Filter -->
                <div class="filter-group">
                  <label class="filter-label">Địa chỉ:</label>
                  <select id="addressFilter" class="form-select">
                    <option value="all">Tất cả</option>
                    <!-- <option value="Nguyễn Văn Công">Nguyễn Văn Công</option>
                    <option value="Dương Quảng Hàm">Dương Quảng Hàm</option> -->
                  </select>
                </div>

                <!-- Price Range Filter -->
                <div class="filter-group">
                  <label for="priceRange" class="filter-label"
                    >Khoảng giá (VNĐ):</label
                  >
                  <input
                    type="range"
                    class="form-range"
                    min="0"
                    max="5000000"
                    step="100000"
                    value="0"
                    id="priceRange"
                  />
                  <div class="d-flex justify-content-between">
                    <span id="minPrice">0</span>
                    <span id="maxPrice">5.000.000</span>
                  </div>
                </div>

                <!-- Capacity Filter -->
                <div class="filter-group">
                  <label for="occupantNumberRange" class="filter-label"
                    >Số người ở:</label
                  >
                  <input
                    type="range"
                    class="form-range"
                    min="0"
                    max="5"
                    step="1"
                    value="0"
                    id="occupantNumberRange"
                  />
                  <div class="d-flex justify-content-between">
                    <span id="minOccupantNumber">0</span>
                    <span id="maxOccupantNumber">5</span>
                  </div>
                </div>

                <!-- Status Filter -->
                <div class="filter-group">
                  <label class="filter-label">Trạng thái:</label>
                  <select id="statusFilter" class="form-select">
                    <option value="all">Tất cả</option>
                    <option value="vacant">Trống</option>
                    <option value="occupied">Đã thuê</option>
                    <option value="unavailable">Không có sẵn</option>
                  </select>
                </div>

                <!-- Apply Filter Button (Optional, for clarity) -->
                <button id="applyFilters" class="apply-filters-btn btn w-100">
                  Áp dụng
                </button>
              </div>

              <!-- Add New Room Button -->
              <div class="mt-3">
                <button id="addNewRoomBtn" class="add-room-btn btn w-100">
                  Thêm phòng mới
                </button>
              </div>
            </div>

            <!-- Right Column: Room List -->
            <div class="col-md-9">
              <div class="room-list-container table-responsive">
                <table
                  class="table table-hover table-striped align-middle room-table"
                >
                  <thead class="table-header-bg">
                    <tr>
                      <th scope="col">STT</th>
                      <th scope="col">Số phòng</th>
                      <th scope="col">Địa chỉ</th>
                      <th scope="col" class="text-end">Giá thuê (VNĐ)</th>
                      <th scope="col" class="text-center">Số người tối đa</th>
                      <th scope="col" class="text-center">Trạng thái</th>
                      <th scope="col" class="text-center"></th>
                    </tr>
                  </thead>
                  <tbody id="roomTableBody">
                    <!-- Các hàng dữ liệu phòng sẽ được thêm vào đây bằng JavaScript -->
                    <tr>
                      <td colspan="6" class="text-center">
                        Đang tải dữ liệu...
                      </td>
                      <td class="text-center">
                        <!-- delete room btn -->
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <!-- Pagination -->
              <nav aria-label="Page navigation">
                <ul class="pagination justify-content-center mt-3">
                  <!-- Pagination items will be added here dynamically -->
                </ul>
              </nav>
            </div>
          </div>
        </div>

        <div
          id="amenities-utilities-tab-container"
          class="amenities-utilities-tab-container"
          style="display: none"
        >
          <div class="row">
            <div class="col-md-6">
              <div
                class="amenities-tab-title d-flex justify-content-center align-items-center"
              >
                QUẢN LÝ DANH SÁCH TIỆN NGHI
              </div>
              <!-- Add New Amenity Button -->
              <div class="mt-2 mb-2">
                <button id="addNewAmenityBtn" class="add-amenity-btn btn w-100">
                  Thêm tiện nghi mới
                </button>
              </div>
              <div class="amenity-list-container table-responsive">
                <table
                  class="table table-hover table-striped align-middle amenity-table"
                >
                  <thead class="table-header-bg">
                    <tr>
                      <th scope="col">STT</th>
                      <th scope="col">Tên tiện nghi</th>
                      <th scope="col" class="text-end">Giá thuê (VNĐ)</th>
                      <th scope="col" class="text-center"></th>
                    </tr>
                  </thead>
                  <tbody id="amenityTableBody">
                    <!-- Các hàng dữ liệu tiện nghi sẽ được thêm vào đây bằng JavaScript -->
                    <tr>
                      <td colspan="3" class="text-center">
                        Đang tải dữ liệu...
                      </td>
                      <td class="text-center">
                        <!-- delete amenity btn -->
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
            <div class="col-md-6">
              <div
                class="utilities-tab-title d-flex justify-content-center align-items-center"
              >
                QUẢN LÝ DANH SÁCH TIỆN ÍCH
              </div>
              <!-- Add New Utitlity Button -->
              <div class="mt-2 mb-2">
                <button id="addNewUtilityBtn" class="add-utility-btn btn w-100">
                  Thêm tiện ích mới
                </button>
              </div>
              <div class="utility-list-container table-responsive">
                <table
                  class="table table-hover table-striped align-middle utility-table"
                >
                  <thead class="table-header-bg">
                    <tr>
                      <th scope="col">STT</th>
                      <th scope="col">Tên tiện ích</th>
                      <th scope="col" class="text-end">Giá thuê (VNĐ)</th>
                      <th scope="col" class="text-center"></th>
                    </tr>
                  </thead>
                  <tbody id="utilityTableBody">
                    <!-- Các hàng dữ liệu tiện ích sẽ được thêm vào đây bằng JavaScript -->
                    <tr>
                      <td colspan="3" class="text-center">
                        Đang tải dữ liệu...
                      </td>
                      <td class="text-center">
                        <!-- delete utility btn -->
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>

        <div id="occupants-tab-container" class="occupants-tab-container"></div>

        <div
          id="contracts-tab-container"
          class="contracts-tab-container"
          style="display: none"
        >
          <!-- START: contracts-tab-container (Layout matches provided image) -->
          <div id="contracts-tab-container" class="contracts-tab-container">
            <div
              class="contracts-tab-title d-flex justify-content-center align-items-center"
            >
              QUẢN LÝ DANH SÁCH HỢP ĐỒNG
            </div>

            <!-- Search Section - Placed directly below title, above the main row -->
            <div class="search-container my-3">
              <div class="input-group">
                <input
                  type="text"
                  id="searchContractInput"
                  class="form-control"
                  placeholder="Tìm theo mã hợp đồng"
                  aria-label="Tìm kiếm hợp đồng"
                />
                <button id="searchContractsBtn" class="btn h-100" type="button">
                  Tìm kiếm
                </button>
              </div>
            </div>

            <!-- Row for Filters and Table -->
            <div class="row">
              <!-- Left Column: Filters & Add Button -->
              <div class="col-md-3">
                <div class="filter-container">
                  <h5 class="filter-heading">Lọc hợp đồng</h5>

                  <!-- Room Filter -->
                  <div class="filter-group">
                    <label for="contractRoomFilter" class="filter-label"
                      >Phòng:</label
                    >
                    <select id="contractRoomFilter" class="form-select">
                      <option value="all" selected>Tất cả phòng</option>
                      <!-- Options sẽ được load bằng JS -->
                      <option value="" disabled>Đang tải...</option>
                    </select>
                  </div>
                  <!-- Start Date Filter -->
                  <div class="filter-group">
                    <label for="contractStartDateFilter" class="filter-label"
                      >Ngày bắt đầu:</label
                    >
                    <input
                      type="date"
                      id="contractStartDateFilter"
                      class="form-control"
                      placeholder="mm/dd/yyyy"
                    />
                  </div>

                  <!-- End Date Filter -->
                  <div class="filter-group">
                    <label for="contractEndDateFilter" class="filter-label"
                      >Ngày kết thúc:</label
                    >
                    <input
                      type="date"
                      id="contractEndDateFilter"
                      class="form-control"
                      placeholder="mm/dd/yyyy"
                    />
                  </div>

                  <!-- Status Filter -->
                  <div class="filter-group">
                    <label class="filter-label">Trạng thái:</label>
                    <select id="contractStatusFilter" class="form-select">
                      <option value="all">Tất cả</option>
                      <option value="active">Còn hiệu lực</option>
                      <option value="expired">Hết hạn</option>
                      <option value="terminated">Đã hủy</option>
                    </select>
                  </div>

                  <!-- Apply Filter Button -->
                  <button
                    id="applyContractFilters"
                    class="apply-filters-btn btn w-100"
                  >
                    Áp dụng lọc
                  </button>
                </div>

                <!-- Add New Contract Button -->
                <div class="mt-3">
                  <button
                    id="addNewContractBtn"
                    class="add-contract-btn btn w-100"
                  >
                    Thêm hợp đồng mới
                  </button>
                </div>
              </div>

              <!-- Right Column: Contract List & Pagination -->
              <div class="col-md-9">
                <!-- Contract List Table -->
                <div class="contract-list-container table-responsive">
                  <table
                    class="table table-hover table-striped align-middle contract-table"
                  >
                    <thead class="table-header-bg">
                      <!-- Adjusted style to match image header -->
                      <tr>
                        <th scope="col">STT</th>
                        <th scope="col">Mã hợp đồng</th>
                        <th scope="col">Phòng</th>
                        <!-- <th scope="col">Địa chỉ</th> -->
                        <th scope="col" class="text-center">Ngày bắt đầu</th>
                        <th scope="col" class="text-center">Ngày kết thúc</th>
                        <th scope="col" class="text-center">Trạng thái</th>
                        <th scope="col" class="text-center"></th>
                      </tr>
                    </thead>
                    <tbody id="contractTableBody">
                      <tr>
                        <td colspan="7" class="text-center">
                          Đang tải dữ liệu...
                        </td>
                      </tr>
                      <!-- Contract data rows -->
                    </tbody>
                  </table>
                </div>

                <!-- Pagination -->
                <nav aria-label="Contract list page navigation">
                  <ul
                    class="pagination justify-content-center mt-3"
                    id="contractPagination"
                  >
                    <!-- Pagination items -->
                  </ul>
                </nav>
              </div>
            </div>
          </div>
        </div>

        <div
          id="invoices-tab-container"
          class="invoices-tab-container"
          style="display: none"
        ></div>

        <div
          id="expenses-tab-container"
          class="expenses-tab-container"
          style="display: none"
        ></div>

        <div
          id="users-tab-container"
          class="users-tab-container"
          style="display: none"
        ></div>

        <div
          id="notifications-tab-container"
          class="notifications-tab-container"
        ></div>

        <div id="settings-tab-container" class="settings-tab-container"></div>
      </div>

      <!-- Add New Room Modal -->
      <div
        class="modal fade"
        id="addNewRoomModal"
        tabindex="-1"
        aria-labelledby="addNewRoomModalLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog modal-lg modal-dialog-scrollable">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="addNewRoomModalLabel">
                Thêm phòng mới
              </h5>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
              ></button>
            </div>
            <div class="modal-body">
              <form id="addRoomForm" novalidate>
                <!-- Feedback Area -->
                <div
                  id="addRoomModalFeedback"
                  class="alert"
                  role="alert"
                  style="display: none"
                ></div>

                <div class="row">
                  <!-- Left Column -->
                  <div class="col-md-6">
                    <!-- Room Number -->
                    <div class="mb-3">
                      <label for="newRoomNumber" class="form-label required"
                        >Số phòng:</label
                      >
                      <input
                        type="text"
                        class="form-control"
                        id="newRoomNumber"
                        required
                      />
                      <div class="invalid-feedback">
                        Vui lòng nhập số phòng.
                      </div>
                    </div>

                    <!-- Address -->
                    <div class="mb-3">
                      <label for="newRoomAddress" class="form-label required"
                        >Địa chỉ:</label
                      >
                      <input
                        type="text"
                        class="form-control"
                        id="newRoomAddress"
                        required
                      />
                      <!-- Or use a select if addresses are predefined -->
                      <!--
                                <select class="form-select" id="newRoomAddress" required>
                                    <option value="" selected disabled>Chọn địa chỉ</option>
                                    <option value="Nguyễn Văn Công">Nguyễn Văn Công</option>
                                    <option value="Dương Quảng Hàm">Dương Quảng Hàm</option>
                                    <div class="invalid-feedback">Vui lòng chọn địa chỉ.</div>
                                </select>
                                -->
                      <div class="invalid-feedback">Vui lòng nhập địa chỉ.</div>
                    </div>

                    <!-- Rent Price -->
                    <div class="mb-3">
                      <label for="newRoomRentPrice" class="form-label required"
                        >Giá thuê (VNĐ):</label
                      >
                      <input
                        type="number"
                        class="form-control"
                        id="newRoomRentPrice"
                        min="0"
                        step="50000"
                        required
                      />
                      <div class="invalid-feedback">
                        Vui lòng nhập giá thuê hợp lệ (lớn hơn hoặc bằng 0).
                      </div>
                    </div>

                    <!-- Occupants Number -->
                    <div class="mb-3">
                      <label
                        for="newRoomOccupantsNumber"
                        class="form-label required"
                        >Số người tối đa:</label
                      >
                      <input
                        type="number"
                        class="form-control"
                        id="newRoomOccupantsNumber"
                        min="1"
                        step="1"
                        required
                      />
                      <div class="invalid-feedback">
                        Vui lòng nhập số người tối đa hợp lệ (lớn hơn hoặc bằng
                        1).
                      </div>
                    </div>

                    <!-- Status -->
                    <!-- <div class="mb-3">
                      <label for="newRoomStatus" class="form-label required"
                        >Trạng thái:</label
                      >
                      <select class="form-select" id="newRoomStatus" required>
                        <option value="vacant" selected>Trống</option>
                        <option value="occupied">Đã thuê</option>
                        <option value="unavailable">Không có sẵn</option>
                      </select>
                    </div> -->

                    <!-- Description -->
                    <div class="mb-3">
                      <label for="newRoomDescription" class="form-label"
                        >Mô tả thêm:</label
                      >
                      <textarea
                        class="form-control"
                        id="newRoomDescription"
                        rows="3"
                      ></textarea>
                    </div>
                  </div>

                  <!-- Right Column -->
                  <div class="col-md-6">
                    <!-- Amenities -->
                    <div class="mb-3">
                      <label class="form-label">Tiện nghi cung cấp:</label>
                      <div
                        id="newRoomAmenitiesList"
                        class="checklist-container"
                      >
                        <!-- Checkboxes will be loaded here -->
                        <p class="text-muted">Đang tải tiện nghi...</p>
                      </div>
                    </div>

                    <!-- Utilities -->
                    <div class="mb-3">
                      <label class="form-label">Tiện ích cung cấp:</label>
                      <div
                        id="newRoomUtilitiesList"
                        class="checklist-container"
                      >
                        <!-- Checkboxes will be loaded here -->
                        <p class="text-muted">Đang tải tiện ích...</p>
                      </div>
                    </div>

                    <!-- Images -->
                    <div class="mb-3">
                      <label class="form-label">Hình ảnh:</label>
                      <input
                        type="file"
                        class="form-control d-none"
                        id="newRoomImagesInput"
                        multiple
                        accept="image/*"
                      />
                      <!-- Trigger button -->
                      <button
                        type="button"
                        class="btn btn-outline-secondary btn-sm mb-2"
                        id="selectRoomImagesBtn"
                      >
                        Chọn ảnh...
                      </button>
                      <div
                        id="newRoomImagePreview"
                        class="image-preview-container mt-2"
                      >
                        <!-- Image previews will be shown here -->
                      </div>
                    </div>
                  </div>
                </div>
              </form>
            </div>
            <div class="modal-footer">
              <button
                type="button"
                class="cancel-btn btn"
                id="cancelRoomBtn"
                data-bs-dismiss="modal"
              >
                Hủy
              </button>
              <button type="button" class="save-btn btn" id="saveNewRoomBtn">
                <span
                  class="spinner-border spinner-border-sm"
                  role="status"
                  aria-hidden="true"
                  style="display: none"
                ></span>
                Lưu phòng
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Add New Amenity Modal -->
      <div
        class="modal fade"
        id="addNewAmenityModal"
        tabindex="-1"
        aria-labelledby="addNewAmenityModalLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog modal-md modal-dialog-scrollable">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="addNewAmenityModalLabel">
                Thêm tiện nghi mới
              </h5>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="close"
              ></button>
            </div>
            <div class="modal-body">
              <form id="addAmenityForm" novalidate>
                <!-- feedback area -->
                <div
                  id="addAmenityModalFeedback"
                  class="alert"
                  role="alert"
                  style="display: none"
                ></div>

                <!-- amenity name -->
                <div class="mb-3">
                  <label for="newAmenityName" class="form-label required"
                    >Tên tiện nghi:</label
                  >
                  <input
                    type="text"
                    class="form-control"
                    id="newAmenityName"
                    required
                  />
                  <div class="invalid-feedback">
                    Vui lòng nhập tên tiện nghi.
                  </div>
                </div>

                <!-- amenity price -->
                <div class="mb-3">
                  <label for="newAmenityPrice" class="form-label required"
                    >Giá thuê (VNĐ):</label
                  >
                  <input
                    type="number"
                    class="form-control"
                    id="newAmenityPrice"
                    min="0"
                    step="1000"
                    required
                  />
                  <div class="invalid-feedback">
                    Vui lòng nhập giá thuê hợp lệ (lớn hơn hoặc bằng 0).
                  </div>
                </div>

                <!-- amenity images -->
                <div class="mb-3">
                  <label class="form-label">Hình ảnh:</label>
                  <input
                    type="file"
                    class="form-control d-none"
                    id="newAmenityImagesInput"
                    multiple
                    accept="image/*"
                  />
                  <!-- trigger button -->
                  <button
                    type="button"
                    class="btn btn-outline-secondary btn-sm mb-2"
                    id="selectAmenityImagesBtn"
                  >
                    Chọn ảnh...
                  </button>
                  <div
                    id="newAmenityImagePreview"
                    class="image-preview-container mt-2"
                  >
                    <!-- image previews will be shown here -->
                  </div>
                  <!-- có thể thêm invalid-feedback nếu hình ảnh bắt buộc -->
                </div>
              </form>
            </div>
            <div class="modal-footer">
              <button
                type="button"
                class="cancel-btn btn"
                id="cancelAmenityBtn"
                data-bs-dismiss="modal"
              >
                Hủy
              </button>
              <button type="button" class="save-btn btn" id="saveNewAmenityBtn">
                <span
                  class="spinner-border spinner-border-sm"
                  role="status"
                  aria-hidden="true"
                  style="display: none"
                ></span>
                Lưu tiện nghi
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Add New Utility Modal -->
    <div
      class="modal fade"
      id="addNewUtilityModal"
      tabindex="-1"
      aria-labelledby="addNewUtilityModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-md modal-dialog-scrollable">
        <!-- đổi thành modal-md cho gọn hơn -->
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="addNewUtilityModalLabel">
              thêm tiện ích mới
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="close"
            ></button>
          </div>
          <div class="modal-body">
            <form id="addUtilityForm" novalidate>
              <!-- feedback area -->
              <div
                id="addUtilityModalFeedback"
                class="alert"
                role="alert"
                style="display: none"
              ></div>

              <!-- utility name -->
              <div class="mb-3">
                <label for="newUtilityName" class="form-label required"
                  >Tên tiện ích:</label
                >
                <input
                  type="text"
                  class="form-control"
                  id="newUtilityName"
                  required
                />
                <div class="invalid-feedback">Vui lòng nhập tên tiện ích.</div>
              </div>

              <!-- utility price -->
              <div class="mb-3">
                <label for="newUtilityPrice" class="form-label required"
                  >Giá thuê (VNĐ):</label
                >
                <input
                  type="number"
                  class="form-control"
                  id="newUtilityPrice"
                  min="0"
                  step="1000"
                  required
                />
                <div class="invalid-feedback">
                  Vui lòng nhập giá thuê hợp lệ (lớn hơn hoặc bằng 0).
                </div>
              </div>

              <!-- utility images -->
              <div class="mb-3">
                <label class="form-label">Hình ảnh:</label>
                <input
                  type="file"
                  class="form-control d-none"
                  id="newUtilityImagesInput"
                  multiple
                  accept="image/*"
                />
                <!-- trigger button -->
                <button
                  type="button"
                  class="btn btn-outline-secondary btn-sm mb-2"
                  id="selectUtilityImagesBtn"
                >
                  Chọn ảnh...
                </button>
                <div
                  id="newUtilityImagePreview"
                  class="image-preview-container mt-2"
                >
                  <!-- image previews will be shown here -->
                </div>
                <!-- có thể thêm invalid-feedback nếu hình ảnh bắt buộc -->
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="cancel-btn btn"
              id="cancelUtilityBtn"
              data-bs-dismiss="modal"
            >
              Hủy
            </button>
            <button type="button" class="save-btn btn" id="saveNewUtilityBtn">
              <span
                class="spinner-border spinner-border-sm"
                role="status"
                aria-hidden="true"
                style="display: none"
              ></span>
              Lưu tiện ích
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Add New Contract Modal -->
    <div
      class="modal fade"
      id="addNewContractModal"
      tabindex="-1"
      aria-labelledby="addNewContractModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-lg modal-dialog-scrollable">
        <!-- Using modal-lg like the room modal -->
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="addNewContractModalLabel">
              Thêm hợp đồng mới
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <form id="addContractForm" novalidate>
              <!-- Feedback Area -->
              <div
                id="addContractModalFeedback"
                class="alert"
                role="alert"
                style="display: none"
              ></div>

              <div class="row">
                <div class="col-md-6">
                  <!-- Room Selection -->
                  <div class="mb-3">
                    <label for="newContractRoomId" class="form-label required"
                      >Phòng:</label
                    >
                    <select class="form-select" id="newContractRoomId" required>
                      <option value="" selected disabled>Chọn phòng...</option>
                      <!-- Options will be loaded dynamically by JS -->
                      <!-- Example: <option value="room_id_1">Phòng 101 - Địa chỉ A</option> -->
                    </select>
                    <div id="roomSelectLoading" style="display: none">
                      Đang tải danh sách phòng...
                    </div>
                    <div class="invalid-feedback">Vui lòng chọn phòng.</div>
                  </div>

                  <!-- Rent Price (Prefill from Room recommended, but editable) -->
                  <div class="mb-3">
                    <label
                      for="newContractRentPrice"
                      class="form-label required"
                      >Giá thuê (VNĐ):</label
                    >
                    <input
                      type="number"
                      class="form-control"
                      id="newContractRentPrice"
                      min="0"
                      step="50000"
                      required
                    />
                    <small class="form-text text-muted"
                      >Giá thuê sẽ được gợi ý từ phòng đã chọn.</small
                    >
                    <div class="invalid-feedback">
                      Vui lòng nhập giá thuê hợp lệ (lớn hơn hoặc bằng 0).
                    </div>
                  </div>

                  <!-- Deposit -->
                  <div class="mb-3">
                    <label for="newContractDeposit" class="form-label required"
                      >Tiền cọc (VNĐ):</label
                    >
                    <input
                      type="number"
                      class="form-control"
                      id="newContractDeposit"
                      min="0"
                      required
                    />
                    <div class="invalid-feedback">
                      Vui lòng nhập tiền cọc hợp lệ (lớn hơn hoặc bằng 0).
                    </div>
                  </div>

                  <div class="mb-3">
                    <label class="form-label"
                      >Tiện nghi bao gồm (tính vào cọc):</label
                    >
                    <div
                      id="newContractAmenitiesList"
                      class="checklist-container"
                    >
                      <!-- Checkboxes will be loaded here by JS -->
                      <p class="text-muted small m-0">Đang tải tiện nghi...</p>
                    </div>
                  </div>
                </div>

                <div class="col-md-6">
                  <!-- Start Date -->
                  <div class="mb-3">
                    <label
                      for="newContractStartDate"
                      class="form-label required"
                      >Ngày bắt đầu:</label
                    >
                    <input
                      type="date"
                      class="form-control"
                      id="newContractStartDate"
                      required
                    />
                    <div class="invalid-feedback">
                      Vui lòng chọn ngày bắt đầu.
                    </div>
                  </div>

                  <!-- End Date -->
                  <div class="mb-3">
                    <label for="newContractEndDate" class="form-label required"
                      >Ngày kết thúc:</label
                    >
                    <input
                      type="date"
                      class="form-control"
                      id="newContractEndDate"
                      required
                    />
                    <div class="invalid-feedback">
                      Vui lòng chọn ngày kết thúc.
                    </div>
                  </div>
                </div>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="cancel-btn btn"
              id="cancelContractBtn"
              data-bs-dismiss="modal"
            >
              Hủy
            </button>
            <button type="button" class="save-btn btn" id="saveNewContractBtn">
              <span
                class="spinner-border spinner-border-sm"
                role="status"
                aria-hidden="true"
                style="display: none"
              ></span>
              Lưu hợp đồng
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- footer -->
    <footer class="footer-bg py-4">
      <div class="container">
        <div class="row">
          <div class="col-md-6">
            <p class="footer-copyright mb-2">
              © 2025 Nhà trọ Gò Vấp. All rights reserved.
            </p>
            <p class="footer-contact mb-2">
              Liên hệ: 0123 456 789 (Mr. A) | Email: lienhe@nhathogovap.com
            </p>
            <p class="footer-policy">
              <a href="#">Chính sách bảo mật</a>
            </p>
          </div>
          <div class="col-md-6 d-flex justify-content-end align-items-center">
            <div class="footer-social">
              <a
                href="https://www.facebook.com/"
                target="_blank"
                rel="noopener noreferrer"
                aria-label="Facebook"
              >
                <img
                  src="/assets/logo_fb.png"
                  alt="Facebook"
                  class="social-icon"
                />
              </a>
              <a
                href="https://www.youtube.com/"
                target="_blank"
                rel="noopener noreferrer"
                aria-label="Youtube"
              >
                <img
                  src="/assets/logo_ytb.png"
                  alt="YouTube"
                  class="social-icon"
                />
              </a>
            </div>
          </div>
        </div>
      </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script type="module" src="/js/admin/dashboard.js"></script>
  </body>
</html>
